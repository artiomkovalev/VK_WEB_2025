{% extends 'base.html' %}

{% load static %}

{% block content %}
<div class="question-item">
    <div class="vote-controls">
        {% if question.author.avatar %}
        <img src="{{ question.author.avatar.url }}" alt="avatar" class="avatar-image">
        {% else %}
        <img src="{% static 'images/cat.jpg' %}" alt="avatar" class="avatar-image">
        {% endif %}
        <a href="#" class="vote-arrow">▲</a>
        <span class="vote-count">{{ question.rating }}</span>
        <a href="#" class="vote-arrow">▼</a>
    </div>
    <div class="question-content">
        <h2>{{ question.title }}</h2>
        <p>{{ question.text }}</p>
        <div class="question-meta tags">
            Tags:
            {% for tag in question.tags.all %}
            <a href="{% url 'tag' tag_name=tag %}">{{ tag.name }}</a>
            {% endfor %}
        </div>
        <span class="author">
            Author: <a href="#">{{ question.author.username }}</a>
        </span>
    </div>
</div>

<hr id="answers">

{% for answer in answers %}
<div class="question-item" id="answer-{{ answer.id }}">
    {% include 'blocks/answer_item.html' %}
</div>
{% endfor %}

{% with page=answers %}
{% include 'blocks/pagination.html' %}
{% endwith %}

<hr>

{% if user.is_authenticated %}
<form method="POST" action="{% url 'question' question_id=question.id %}">
    {% csrf_token %}
    <div class="form-group">
        {{ form.text }}
        <div class="error-message">{{ form.text.errors }}</div>
    </div>
    <button type="submit" class="btn">Answer</button>
</form>
{% else %}
<p><a href="{% url 'login' %}?continue={{ request.path }}">Log in</a> to answer.</p>
{% endif %}
{% endblock %}
